/**
 * RMS Sidebar Mobile Plugin Styles
 * Compatible with Bootstrap 5 + Limitless Theme
 * Version: 1.0.0
 */

/* جلوگیری از scroll صفحه وقتی sidebar باز است */
.sidebar-mobile-open {
    overflow: hidden !important;
}

/* موبایل: تحت lg بریکپوینت (زیر 992px) */
@media (max-width: 991px) {
    
    /* برای sidebar-expand-lg در موبایل، باید position fixed باشد و پیش‌فرض بسته */
    .sidebar-expand-lg.sidebar-main {
        position: fixed !important;
        top: 0 !important;
        bottom: 0 !important;
        left: calc(-100% - 20px) !important;
        width: var(--bs-sidebar-width, 300px) !important;
        transition: left 0.35s ease-in-out !important;
        z-index: 1050 !important;
        transform: none !important;
        display: flex !important; /* اطمینان از نمایش flex */
    }
    
    /* وقتی sidebar باز می‌شود */
    .sidebar-expand-lg.sidebar-main.sidebar-mobile-expanded {
        left: 0 !important;
        box-shadow: 0 0 25px rgba(0, 0, 0, 0.6) !important;
    }
    
    /* بهبود دکمه‌های toggle */
    .sidebar-mobile-main-toggle {
        -webkit-tap-highlight-color: transparent !important;
        user-select: none !important;
        touch-action: manipulation !important;
        cursor: pointer !important;
    }
    
    /* اطمینان از عدم تداخل با محتوا */
    .content-wrapper {
        margin-left: 0 !important;
    }
    
    /* صفحه کامل در موبایل */
    .page-content {
        padding-left: 0 !important;
    }
}

/* backdrop style - برای همه سایزها */
.sidebar-mobile-backdrop {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(0, 0, 0, 0.6) !important;
    z-index: 1040 !important;
    opacity: 0;
    transition: opacity 0.3s ease !important;
    pointer-events: auto !important;
}

.sidebar-mobile-backdrop[data-backdrop="true"] {
    opacity: 1 !important;
}

/* بهبود نمایش در dark theme */
[data-color-theme="dark"] .sidebar-mobile-backdrop,
[data-bs-theme="dark"] .sidebar-mobile-backdrop {
    background: rgba(0, 0, 0, 0.8) !important;
}

/* اطمینان از نمایش صحیح sidebar در حالت RTL */
[dir="rtl"] @media (max-width: 991px) {
    .sidebar-expand-lg.sidebar-main {
        right: calc(-100% - 20px) !important;
        left: auto !important;
    }
    
    .sidebar-expand-lg.sidebar-main.sidebar-mobile-expanded {
        right: 0 !important;
        left: auto !important;
    }
}

/* اضافه کردن انیمیشن زیبا */
@media (max-width: 991px) {
    .sidebar-expand-lg.sidebar-main {
        animation: sidebarSlideOut 0.35s ease-in-out;
    }
    
    .sidebar-expand-lg.sidebar-main.sidebar-mobile-expanded {
        animation: sidebarSlideIn 0.35s ease-in-out;
    }
}

@keyframes sidebarSlideIn {
    from {
        left: calc(-100% - 20px);
        opacity: 0.8;
    }
    to {
        left: 0;
        opacity: 1;
    }
}

@keyframes sidebarSlideOut {
    from {
        left: 0;
        opacity: 1;
    }
    to {
        left: calc(-100% - 20px);
        opacity: 0.8;
    }
}

/* RTL animations */
[dir="rtl"] @keyframes sidebarSlideIn {
    from {
        right: calc(-100% - 20px);
        opacity: 0.8;
    }
    to {
        right: 0;
        opacity: 1;
    }
}

[dir="rtl"] @keyframes sidebarSlideOut {
    from {
        right: 0;
        opacity: 1;
    }
    to {
        right: calc(-100% - 20px);
        opacity: 0.8;
    }
}

/* بهبود visual feedback برای دکمه‌ها */
.sidebar-mobile-main-toggle:active {
    transform: scale(0.95) !important;
    transition: transform 0.1s ease !important;
}

.sidebar-mobile-main-toggle:focus {
    outline: 2px solid rgba(255, 255, 255, 0.3) !important;
    outline-offset: 2px !important;
}