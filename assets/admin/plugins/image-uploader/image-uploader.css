/**
 * RMS Image Uploader Styles
 * 
 * Professional image upload component styles
 * Bootstrap 5 compatible with RTL support
 * 
 * @version 1.0.0
 * @author RMS Core Team
 */

/* =================================================================
   Main Upload Area
================================================================= */

.rms-image-uploader-wrapper {
    width: 100%;
}

.rms-upload-area {
    border: 2px dashed var(--bs-border-color, #dee2e6);
    border-radius: 8px;
    background-color: var(--bs-light, #f8f9fa);
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    min-height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.rms-upload-area:hover,
.rms-upload-area.drag-over {
    border-color: var(--bs-primary, #0d6efd);
    background-color: rgba(13, 110, 253, 0.05);
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(13, 110, 253, 0.15);
}

.rms-upload-area.drag-enabled {
    cursor: grab;
}

.rms-upload-area.drag-over {
    border-color: var(--bs-success, #198754);
    background-color: rgba(25, 135, 84, 0.05);
}

.upload-content {
    width: 100%;
    pointer-events: none; /* Allow click through to parent */
}

.upload-content .btn-browse {
    pointer-events: all; /* Re-enable pointer events for button */
}

.upload-icon {
    opacity: 0.7;
}

.upload-text h6 {
    color: var(--bs-dark, #212529);
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.upload-info {
    color: var(--bs-secondary, #6c757d) !important;
    font-size: 0.875rem;
}

/* Upload Progress */
.upload-progress {
    width: 100%;
    padding: 2rem;
}

.upload-progress .progress {
    height: 8px;
    border-radius: 4px;
    background-color: rgba(13, 110, 253, 0.1);
}

.upload-progress .progress-bar {
    background: linear-gradient(45deg, #0d6efd, #6610f2);
    border-radius: 4px;
}

.progress-text {
    color: var(--bs-primary, #0d6efd);
    font-weight: 500;
}

/* =================================================================
   Preview Area
================================================================= */

.rms-preview-area {
    max-height: 400px;
    overflow-y: auto;
}

.rms-image-preview {
    background-color: var(--bs-white, #fff);
    border: 1px solid var(--bs-border-color, #dee2e6) !important;
    transition: all 0.2s ease;
    position: relative;
}

.rms-image-preview:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border-color: var(--bs-primary, #0d6efd) !important;
}

.preview-thumbnail img {
    border: 1px solid var(--bs-border-color, #dee2e6);
    object-fit: cover;
    background-color: var(--bs-light, #f8f9fa);
}

.preview-info .fw-bold {
    color: var(--bs-dark, #212529);
    font-size: 0.95rem;
    margin-bottom: 0.25rem;
    word-break: break-word;
}

.preview-info .text-muted {
    font-size: 0.8rem;
}

.preview-actions .btn {
    font-size: 0.8rem;
    padding: 0.25rem 0.75rem;
}

.preview-status {
    min-width: 32px;
}

/* =================================================================
   Error Messages
================================================================= */

.image-upload-error {
    border: none;
    border-left: 4px solid var(--bs-danger, #dc3545);
    background-color: rgba(220, 53, 69, 0.1);
    color: var(--bs-danger, #dc3545);
}

.image-upload-error .ph-warning-circle {
    font-size: 1.1rem;
}

/* =================================================================
   Dark Theme Support
================================================================= */

[data-color-theme="dark"] .rms-upload-area {
    border-color: var(--border-color, #4a5568);
    background-color: var(--card-bg, #2d2f33);
    color: var(--text-color, #ffffff);
}

[data-color-theme="dark"] .rms-upload-area:hover,
[data-color-theme="dark"] .rms-upload-area.drag-over {
    background-color: rgba(13, 110, 253, 0.1);
}

[data-color-theme="dark"] .upload-text h6 {
    color: var(--text-color, #ffffff);
}

[data-color-theme="dark"] .upload-info {
    color: var(--text-white-75, rgba(255, 255, 255, 0.75)) !important;
}

[data-color-theme="dark"] .rms-image-preview {
    background-color: var(--card-bg, #2d2f33);
    border-color: var(--border-color, #4a5568) !important;
    color: var(--text-color, #ffffff);
}

[data-color-theme="dark"] .rms-image-preview:hover {
    border-color: var(--primary, #0d6efd) !important;
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
}

[data-color-theme="dark"] .preview-thumbnail img {
    border-color: var(--border-color, #4a5568);
    background-color: var(--input-bg, #374151);
}

[data-color-theme="dark"] .preview-info .fw-bold {
    color: var(--text-color, #ffffff);
}

[data-color-theme="dark"] .image-upload-error {
    background-color: rgba(220, 53, 69, 0.2);
    border-left-color: var(--danger, #dc3545);
    color: var(--text-color, #ffffff);
}

/* =================================================================
   Responsive Design
================================================================= */

/* Mobile Optimization */
@media (max-width: 576px) {
    .rms-upload-area {
        min-height: 140px;
    }
    
    .upload-content {
        padding: 1.5rem !important;
    }
    
    .upload-text h6 {
        font-size: 0.9rem;
    }
    
    .upload-info {
        font-size: 0.75rem;
    }
    
    .rms-image-preview {
        flex-direction: column;
        text-align: center;
    }
    
    .preview-thumbnail {
        margin-bottom: 1rem !important;
        margin-left: 0 !important;
    }
    
    .preview-info {
        text-align: center;
    }
    
    .preview-status {
        position: absolute;
        top: 10px;
        right: 10px;
    }
}

/* Tablet */
@media (max-width: 768px) {
    .rms-upload-area {
        min-height: 160px;
    }
    
    .upload-content {
        padding: 2rem !important;
    }
}

/* =================================================================
   RTL Support
================================================================= */

[dir="rtl"] .preview-thumbnail {
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-left: 1rem !important; /* RTL spacing */
}

[dir="rtl"] .preview-status {
    margin-left: 0 !important;
    margin-right: 0.5rem !important;
}

[dir="rtl"] .image-upload-error {
    border-left: none;
    border-right: 4px solid var(--bs-danger, #dc3545);
}

/* =================================================================
   Animation Effects
================================================================= */

@keyframes uploadSuccess {
    0% { opacity: 0; transform: translateY(20px) scale(0.9); }
    50% { transform: translateY(-5px) scale(1.05); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes dragEnter {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}

.rms-image-preview.success {
    animation: uploadSuccess 0.5s ease-out;
}

.rms-upload-area.drag-over {
    animation: dragEnter 0.3s ease-out;
}

/* Fade in effect for preview area */
.rms-preview-area {
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
}

.rms-preview-area[style*="display: block"] {
    opacity: 1;
    transform: translateY(0);
}

/* Loading spinner for progress bar */
@keyframes progressPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.upload-progress .progress-bar-animated {
    animation: progressPulse 1s ease-in-out infinite;
}

/* =================================================================
   Focus States for Accessibility
================================================================= */

.rms-upload-area:focus-within {
    outline: 2px solid var(--bs-primary, #0d6efd);
    outline-offset: 2px;
}

.btn-browse:focus,
.btn-remove:focus {
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .rms-upload-area {
        border-width: 3px;
    }
    
    .rms-upload-area:hover,
    .rms-upload-area.drag-over {
        border-width: 3px;
    }
    
    .rms-image-preview {
        border-width: 2px !important;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .rms-upload-area,
    .rms-image-preview,
    .rms-preview-area {
        transition: none;
    }
    
    .rms-image-preview.success {
        animation: none;
    }
    
    .rms-upload-area.drag-over {
        animation: none;
    }
}